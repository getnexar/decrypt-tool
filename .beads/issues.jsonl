{"id":"decrypt-tool-1","title":"Phase 1.1: Implement crypto library","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T14:54:18.228966-05:00","updated_at":"2026-02-02T17:45:39.909156-05:00","closed_at":"2026-02-02T17:45:39.909156-05:00"}
{"id":"decrypt-tool-10","title":"Phase 4.2: Google Drive integration","description":"Create GDrive wrapper in src/lib/gdrive.ts using googleapis package: listMp4Files, downloadFile, uploadFile, createFolder. Handle OAuth via NAP google-drive capability.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:55:06.338018-05:00","updated_at":"2026-02-02T17:56:53.719527-05:00","closed_at":"2026-02-02T17:56:53.719527-05:00","dependencies":[{"issue_id":"decrypt-tool-10","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-11","title":"Phase 4.3: API routes","description":"Create Next.js API routes: POST /api/jobs, GET /api/jobs/[id], POST /api/jobs/[id]/retry, GET /api/jobs/[id]/download/[filename], GET /api/jobs/[id]/download-all, GET /api/jobs/[id]/csv","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:55:30.155847-05:00","updated_at":"2026-02-02T18:13:31.916794-05:00","closed_at":"2026-02-02T18:13:31.916794-05:00","dependencies":[{"issue_id":"decrypt-tool-11","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-12","title":"Phase 4.4: Server decrypt processor","description":"Create processor in src/lib/processor.ts: orchestrates server-side decryption - streams from GDrive, decrypts chunks, uploads to destination or stores for download, updates job progress","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:55:35.170449-05:00","updated_at":"2026-02-02T18:13:31.917311-05:00","closed_at":"2026-02-02T18:13:31.917311-05:00","dependencies":[{"issue_id":"decrypt-tool-12","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-13","title":"Phase 5.1: Main page assembly","description":"Wire together src/app/page.tsx: form submission detects flow type, client-side uses useClientDecrypt hook, server-side POSTs to /api/jobs and polls status, shows progress during processing, shows results on completion","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-02T14:55:40.013345-05:00","updated_at":"2026-02-02T18:17:05.536285-05:00","closed_at":"2026-02-02T18:17:05.536285-05:00","dependencies":[{"issue_id":"decrypt-tool-13","depends_on_id":"decrypt-tool-5","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"decrypt-tool-13","depends_on_id":"decrypt-tool-7","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"decrypt-tool-13","depends_on_id":"decrypt-tool-11","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-14","title":"Phase 5.2: State management hook","description":"Create useDecryptJob hook in src/hooks/useDecryptJob.ts: unified hook for both client and server flows with startJob, status, progress, results, retry methods","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-02T14:55:44.133045-05:00","updated_at":"2026-02-02T18:23:15.979158-05:00","closed_at":"2026-02-02T18:23:15.979158-05:00","dependencies":[{"issue_id":"decrypt-tool-14","depends_on_id":"decrypt-tool-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-15","title":"Phase 5.3: Error handling","description":"Implement error handling: invalid key format (inline validation), invalid MP4 header (mark failed, continue), network errors (retry with backoff), large files (streaming), empty folder (clear message)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-02T14:55:49.345807-05:00","updated_at":"2026-02-02T18:23:15.979186-05:00","closed_at":"2026-02-02T18:22:53.347951-05:00","dependencies":[{"issue_id":"decrypt-tool-15","depends_on_id":"decrypt-tool-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-16","title":"Phase 5.4: Security hardening","description":"Security per design doc: keys never logged, job isolation (UUID), file size limits (2GB/file, 10GB/job), filename sanitization, secure deletion, input validation on all inputs","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-02T14:55:53.995059-05:00","updated_at":"2026-02-02T18:23:15.979193-05:00","closed_at":"2026-02-02T18:23:15.979193-05:00","dependencies":[{"issue_id":"decrypt-tool-16","depends_on_id":"decrypt-tool-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-17","title":"Add elapsed and remaining time to progress bar","description":"Add elapsed time and estimated remaining time to the ProgressPanel component during decryption.\n\n**Current State:**\n- ProgressPanel shows: 'Decrypting file X of Y' with percentage\n- DecryptProgress type has: totalFiles, processedFiles, currentFile, overallProgress, status\n\n**Requirements:**\n1. Display elapsed time (format: MM:SS or HH:MM:SS if \u003e 1hr)\n2. Display estimated remaining time based on naive calculation (assumes each file takes same time)\n3. Formula: remainingTime = (elapsedTime / processedFiles) * (totalFiles - processedFiles)\n\n**Files to modify:**\n- src/types/index.ts - Add startedAt?: string to DecryptProgress type\n- src/components/ProgressPanel.tsx - Add elapsed/remaining time display\n- src/hooks/useDecryptJob.ts - Track start time when processing begins\n- src/hooks/useClientDecrypt.ts - Track start time for client-side flow\n\n**UI placement:**\nShow below the progress bar, e.g.:\n'Elapsed: 01:23 | Remaining: ~02:45'\n\n**Edge cases:**\n- Show '--:--' for remaining time until at least 1 file is processed\n- Don't show negative remaining time","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T13:58:36.470446-05:00","created_by":"naama","updated_at":"2026-02-03T15:50:27.302344-05:00","closed_at":"2026-02-03T15:50:27.302344-05:00"}
{"id":"decrypt-tool-18","title":"Add tool version to page","description":"Display the tool version on the main page. Read version from package.json.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T15:54:30.413124-05:00","created_by":"naama","updated_at":"2026-02-03T15:55:08.882622-05:00","closed_at":"2026-02-03T15:55:08.882622-05:00"}
{"id":"decrypt-tool-19","title":"Add user-friendly error for GDrive auth failure","description":"Show clear error message when Google Drive authentication fails (401). Current behavior shows generic error.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T16:25:36.076525-05:00","created_by":"naama","updated_at":"2026-02-03T16:27:07.901032-05:00","closed_at":"2026-02-03T16:27:07.901032-05:00"}
{"id":"decrypt-tool-2","title":"Phase 1.2: Type definitions","description":"Create TypeScript types for Job, FileResult, DecryptProgress, SourceType, DestType, JobStatus, FileStatus in src/types/index.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T14:54:27.69472-05:00","updated_at":"2026-02-02T17:45:39.909548-05:00","closed_at":"2026-02-02T17:45:39.909548-05:00"}
{"id":"decrypt-tool-20","title":"Add live file log to ProgressPanel","description":"Show file names and status (pending/processing/success/failed) during decryption, not just after completion. Add scrollable file list to ProgressPanel component.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T22:09:56.904131-05:00","created_by":"naama","updated_at":"2026-02-03T22:13:44.563834-05:00","closed_at":"2026-02-03T22:13:44.563834-05:00"}
{"id":"decrypt-tool-21","title":"Fix retry: remaining time and live log","description":"During retry failed: (1) remaining time is wrong because ProgressPanel refs aren't reset, (2) live log doesn't update because results only updates after retry completes","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-03T22:29:02.683177-05:00","created_by":"naama","updated_at":"2026-02-03T22:30:14.245141-05:00","closed_at":"2026-02-03T22:30:14.245141-05:00"}
{"id":"decrypt-tool-22","title":"Handle existing decrypted folder on re-run","description":"When source GDrive folder has existing 'decrypted' subfolder: (1) detect before job start, (2) show dialog with options: include nested / overwrite / skip, (3) pass choice to processor","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-04T08:00:08.711038-05:00","created_by":"naama","updated_at":"2026-02-04T08:04:13.128431-05:00","closed_at":"2026-02-04T08:04:13.128431-05:00"}
{"id":"decrypt-tool-23","title":"Evaluate JWT expiry simplification (15min→7day)","description":"NAP 3.21.0 extended public JWT expiry from 15 minutes to 7 days.\n\nCURRENT WORKAROUND:\n- Client-driven batch processing: useDecryptJob.ts makes repeated POST /api/jobs/{id}/process-next calls\n- Each call carries a fresh JWT from browser session to avoid token expiry during long jobs\n- 3 parallel workers × 3 files per batch = processes 9 files concurrently\n- Comments in code explicitly reference this pattern (process-next/route.ts:40-44, useDecryptJob.ts:261-264)\n\nWHAT TO EVALUATE:\n- With 7-day tokens, can we simplify to a single server-side processing call?\n- Or keep batch pattern for progress tracking but remove the fresh-JWT justification?\n- Impact on error handling (useDecryptJob.ts:331-338 auth expiry messages)\n- Update comments/docs that reference the 15-min limitation\n- Consider: batch pattern still useful for progress UX even if JWT isn't the driver\n\nKEY FILES:\n- src/hooks/useDecryptJob.ts (client-side worker/batch orchestration)\n- src/app/api/jobs/[id]/process-next/route.ts (server-side batch handler)\n- src/lib/api.ts (retry logic, 401 handling)\n- src/lib/gdrive.ts (JWT header usage)","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-11T14:14:19.413511-05:00","created_by":"naama","updated_at":"2026-02-11T14:14:19.413511-05:00"}
{"id":"decrypt-tool-24","title":"Remove folder creation workarounds (NAP /drive/folders now available)","description":"NAP 3.21.0 added POST /drive/folders endpoint for folder creation via workspace-proxy.\n\nCURRENT WORKAROUNDS TO REMOVE:\n1. FolderErrorDialog.tsx - UI asking users to manually create folders or use prefix\n2. FolderCreationError class in gdrive.ts (404 fallback logic, lines 599-604)\n3. [decrypted] prefix mode (processor.ts:215-226, useDecryptedPrefix flag)\n4. isFolderCreationError() helper function\n5. Manual folder creation retry flow (useDecryptJob.ts: restartWithPrefix, retryWithManualFolder)\n6. FolderErrorDialog integration in page.tsx (lines 67-73)\n7. README Known Limitations section about folder creation\n\nWHAT TO DO:\n- createFolder() in gdrive.ts already calls POST /drive/folders — just remove the 404 fallback\n- Remove FolderErrorDialog component entirely\n- Remove prefix mode logic from processor.ts  \n- Remove restartWithPrefix/retryWithManualFolder from useDecryptJob.ts\n- Clean up page.tsx folder error handling\n- Update README to remove the known limitation\n- Test: GDrive→GDrive same folder should now create 'decrypted' subfolder automatically\n\nKEY FILES:\n- src/lib/gdrive.ts (createFolder, FolderCreationError)\n- src/lib/processor.ts (prefix mode logic)\n- src/hooks/useDecryptJob.ts (restartWithPrefix, retryWithManualFolder)\n- src/components/FolderErrorDialog.tsx (entire file removable)\n- src/app/page.tsx (FolderErrorDialog integration)\n- src/app/api/gdrive/check-folder/route.ts (may simplify)\n- README.md (Known Limitations section)","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-11T14:14:26.450532-05:00","created_by":"naama","updated_at":"2026-02-11T14:14:26.450532-05:00"}
{"id":"decrypt-tool-3","title":"Phase 1.3: Validation utilities","description":"Create validation functions: validateHexKey, parseGDriveUrl, sanitizeFilename, validateMp4File in src/lib/validation.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T14:54:36.00295-05:00","updated_at":"2026-02-02T17:45:39.909556-05:00","closed_at":"2026-02-02T17:45:39.909556-05:00"}
{"id":"decrypt-tool-4","title":"Phase 2.1: Fetch design system components","description":"Fetch Button, Input, Label, RadioGroup, Progress, Badge, Card, Table, Select from Nexar Design System repo. Install: @radix-ui/react-label @radix-ui/react-radio-group @radix-ui/react-progress @radix-ui/react-select","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T14:54:40.263175-05:00","updated_at":"2026-02-02T17:45:39.909559-05:00","closed_at":"2026-02-02T17:45:39.909559-05:00"}
{"id":"decrypt-tool-5","title":"Phase 2.2: Custom UI components","description":"Build FileDropzone (drag-drop MP4 upload), DecryptForm (source/key/destination inputs), ProgressPanel (progress bar with file counter), ResultsPanel (summary badges, retry button), FileLogTable (filterable table with download icons)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T14:54:44.488776-05:00","updated_at":"2026-02-02T17:56:53.718938-05:00","closed_at":"2026-02-02T17:56:53.718938-05:00","dependencies":[{"issue_id":"decrypt-tool-5","depends_on_id":"decrypt-tool-4","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-6","title":"Phase 3.1: Browser decrypt worker","description":"Create Web Worker for off-main-thread decryption in src/workers/decrypt.worker.ts. Receives File + key, processes chunk-by-chunk XOR, returns decrypted blob + progress updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:54:48.960387-05:00","updated_at":"2026-02-02T17:56:53.719507-05:00","closed_at":"2026-02-02T17:56:53.719507-05:00","dependencies":[{"issue_id":"decrypt-tool-6","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-7","title":"Phase 3.2: Client decrypt hook","description":"Create useClientDecrypt hook in src/hooks/useClientDecrypt.ts. Returns decryptFiles(files, key), progress state, and cancel function. Uses Web Worker internally.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:54:53.016119-05:00","updated_at":"2026-02-02T17:56:53.719516-05:00","closed_at":"2026-02-02T17:56:53.719516-05:00","dependencies":[{"issue_id":"decrypt-tool-7","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-8","title":"Phase 3.3: Download utilities","description":"Create download utilities in src/lib/download.ts: downloadFile (single blob), downloadAsZip (multiple files using JSZip), generateCsvLog (CSV export). Install jszip package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:54:57.497177-05:00","updated_at":"2026-02-02T17:56:53.71952-05:00","closed_at":"2026-02-02T17:56:53.71952-05:00","dependencies":[{"issue_id":"decrypt-tool-8","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"decrypt-tool-9","title":"Phase 4.1: Job storage","description":"Create in-memory job store in src/lib/job-store.ts: createJob (UUID), updateJobStatus, getJob, auto-expire after 24h. Upgrade to Redis/DB later if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T14:55:02.107058-05:00","updated_at":"2026-02-02T17:56:53.719524-05:00","closed_at":"2026-02-02T17:56:53.719524-05:00","dependencies":[{"issue_id":"decrypt-tool-9","depends_on_id":"decrypt-tool-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
